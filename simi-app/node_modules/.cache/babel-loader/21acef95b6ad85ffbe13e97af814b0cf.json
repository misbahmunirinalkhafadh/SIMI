{"ast":null,"code":"var _jsxFileName = \"/Users/macbook/Development/SIMI/simi-app/src/components/organisms/Sidebar/SidebarContent.js\";\nimport React, { useEffect, useState } from 'react';\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { Link, NavLink, Route, useHistory } from 'react-router-dom';\nimport { Avatar, Button } from '@windmill/react-ui';\nimport * as Icons from '../../../assets/icons';\nimport SidebarSubmenu from './SidebarSubmenu';\nimport routes from '../../../routes/sidebar';\nimport ModalFormRequest from '../../../pages/RequestService/ModalFormRequest';\nimport { collection, getDocs, query, where } from 'firebase/firestore';\nimport { auth, db } from '../../../utils/firebase';\nimport { usersServices } from '../../../services/users';\n\nfunction Icon(_ref) {\n  let {\n    icon,\n    ...props\n  } = _ref;\n  const Icon = Icons[icon];\n  return /*#__PURE__*/React.createElement(Icon, Object.assign({}, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16,\n      columnNumber: 10\n    }\n  }));\n} // const userData = {\n//   avatar:\n//     \"https://robohash.org/dictavoluptatessimilique.jpg?size=50x50&set=set1\",\n//   name: \"Lissi Meir\",\n//   job: \"Geologist III\"\n// }\n\n\nfunction SidebarContent() {\n  const [user, loading] = useAuthState(auth);\n  const [isModalOpen, setIsModalOpen] = useState(false); // const [dataUser, setDataUser] = useState([])\n\n  const history = useHistory();\n\n  function openModal() {\n    setIsModalOpen(true);\n  }\n\n  function closeModal() {\n    setIsModalOpen(false);\n  } // const fetchUserName = async () => {\n  //   try {\n  //     const q = query(collection(db, \"users\"), where(\"uid\", \"==\", user?.uid));\n  //     // const doc = await getDocs(q);\n  //     // const data = doc.docs[0].data();\n  //     // setDataUser(data);\n  //   } catch (err) {\n  //     console.error(err);\n  //     alert(\"An error occured while fetching user data\");\n  //   }\n  // };\n\n\n  useEffect(() => {\n    if (loading) return;\n    if (!user) return history.push(\"/\"); // fetchUserName();\n  }, [user, loading, history]);\n  useEffect(() => {\n    let email = user === null || user === void 0 ? void 0 : user.email;\n\n    try {\n      usersServices.getByEmail(email).then(data => {\n        console.log(data);\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  }, [email]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"py-4 text-gray-500 dark:text-gray-400\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    className: \"ml-20 text-lg font-bold text-gray-800 dark:text-gray-200 max-w-20\",\n    to: \"/app/home\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }, \"SIMI\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pt-10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex justify-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    className: \"w-20 h-20 p-1 align-middle border-2 rounded-full gray-300\",\n    src: user === null || user === void 0 ? void 0 : user.photoURL,\n    alt: \"\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"text-xs font-medium text-center text-teal-500 md:text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }, user === null || user === void 0 ? void 0 : user.email), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-xs text-center text-gray-500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  }, user === null || user === void 0 ? void 0 : user.uid))), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"mt-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }, routes.map(route => route.routes ? /*#__PURE__*/React.createElement(SidebarSubmenu, {\n    route: route,\n    key: route.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }) : /*#__PURE__*/React.createElement(\"li\", {\n    className: \"relative px-6 py-3\",\n    key: route.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(NavLink, {\n    exact: true,\n    to: route.path,\n    className: \"inline-flex items-center w-full text-sm font-semibold transition-colors duration-150 hover:text-gray-800 dark:hover:text-gray-200\",\n    activeClassName: \"text-gray-800 dark:text-gray-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    path: route.path,\n    exact: route.exact,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"absolute inset-y-0 left-0 w-1 bg-purple-600 rounded-tr-lg rounded-br-lg\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(Icon, {\n    className: \"w-5 h-5\",\n    \"aria-hidden\": \"true\",\n    icon: route.icon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"ml-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 17\n    }\n  }, route.name), route.name === 'Request Service' ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"px-2 py-0.5 ml-auto text-xs font-medium tracking-wide text-red-500 bg-red-50 rounded-full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 53\n    }\n  }, \"10\") : '')))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"px-6 my-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    iconLeft: Icons.AddIcon,\n    onClick: openModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  }, \"Create New Request\")), /*#__PURE__*/React.createElement(ModalFormRequest, {\n    isModalOpen: isModalOpen,\n    closeModal: closeModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default SidebarContent;","map":{"version":3,"names":["React","useEffect","useState","useAuthState","Link","NavLink","Route","useHistory","Avatar","Button","Icons","SidebarSubmenu","routes","ModalFormRequest","collection","getDocs","query","where","auth","db","usersServices","Icon","icon","props","SidebarContent","user","loading","isModalOpen","setIsModalOpen","history","openModal","closeModal","push","email","getByEmail","then","data","console","log","error","photoURL","uid","map","route","name","path","exact","AddIcon"],"sources":["/Users/macbook/Development/SIMI/simi-app/src/components/organisms/Sidebar/SidebarContent.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { Link, NavLink, Route, useHistory } from 'react-router-dom'\nimport { Avatar, Button } from '@windmill/react-ui'\nimport * as Icons from '../../../assets/icons'\nimport SidebarSubmenu from './SidebarSubmenu'\nimport routes from '../../../routes/sidebar'\nimport ModalFormRequest from '../../../pages/RequestService/ModalFormRequest'\nimport { collection, getDocs, query, where } from 'firebase/firestore';\nimport { auth, db } from '../../../utils/firebase';\nimport { usersServices } from '../../../services/users';\n\n\nfunction Icon({ icon, ...props }) {\n  const Icon = Icons[icon]\n  return <Icon {...props} />\n}\n\n// const userData = {\n//   avatar:\n//     \"https://robohash.org/dictavoluptatessimilique.jpg?size=50x50&set=set1\",\n//   name: \"Lissi Meir\",\n//   job: \"Geologist III\"\n// }\n\nfunction SidebarContent() {\n  const [user, loading] = useAuthState(auth);\n  const [isModalOpen, setIsModalOpen] = useState(false)\n  // const [dataUser, setDataUser] = useState([])\n  const history = useHistory()\n\n  function openModal() {\n    setIsModalOpen(true)\n  }\n\n  function closeModal() {\n    setIsModalOpen(false)\n  }\n\n  // const fetchUserName = async () => {\n  //   try {\n  //     const q = query(collection(db, \"users\"), where(\"uid\", \"==\", user?.uid));\n  //     // const doc = await getDocs(q);\n  //     // const data = doc.docs[0].data();\n  //     // setDataUser(data);\n  //   } catch (err) {\n  //     console.error(err);\n  //     alert(\"An error occured while fetching user data\");\n  //   }\n  // };\n\n  useEffect(() => {\n    if (loading) return;\n    if (!user) return history.push(\"/\");\n    // fetchUserName();\n  }, [user, loading, history]);\n\n  useEffect(() => {\n    let email = user?.email\n    try {\n      usersServices.getByEmail(email).then(data => {\n        console.log(data)\n      })\n    } catch (error) {\n      console.log(error)\n    }\n  }, [email])\n\n  return (\n    <div className=\"py-4 text-gray-500 dark:text-gray-400\">\n      <Link className=\"ml-20 text-lg font-bold text-gray-800 dark:text-gray-200 max-w-20\" to=\"/app/home\">\n        SIMI\n      </Link>\n      <div className='pt-10'>\n        <div className='flex justify-center'>\n          <Avatar\n            className=\"w-20 h-20 p-1 align-middle border-2 rounded-full gray-300\"\n            src={user?.photoURL}\n            alt=\"\"\n            aria-hidden=\"true\"\n          />\n        </div>\n        <div className='pt-3'>\n          <h2\n            className=\"text-xs font-medium text-center text-teal-500 md:text-sm\"\n          >\n            {user?.email}\n          </h2>\n          <p className=\"text-xs text-center text-gray-500\">{user?.uid}</p>\n        </div>\n      </div>\n      <ul className=\"mt-6\">\n        {routes.map((route) =>\n          route.routes ? (\n            <SidebarSubmenu route={route} key={route.name} />\n          ) : (\n            <li className=\"relative px-6 py-3\" key={route.name}>\n              <NavLink\n                exact\n                to={route.path}\n                className=\"inline-flex items-center w-full text-sm font-semibold transition-colors duration-150 hover:text-gray-800 dark:hover:text-gray-200\"\n                activeClassName=\"text-gray-800 dark:text-gray-100\"\n              >\n                <Route path={route.path} exact={route.exact}>\n                  <span\n                    className=\"absolute inset-y-0 left-0 w-1 bg-purple-600 rounded-tr-lg rounded-br-lg\"\n                    aria-hidden=\"true\"\n                  ></span>\n                </Route>\n                <Icon className=\"w-5 h-5\" aria-hidden=\"true\" icon={route.icon} />\n                <span className=\"ml-4\">{route.name}</span>\n                {route.name === 'Request Service' ? <span className=\"px-2 py-0.5 ml-auto text-xs font-medium tracking-wide text-red-500 bg-red-50 rounded-full\">10</span> : ''}\n              </NavLink>\n            </li>\n          )\n        )}\n      </ul>\n      <div className=\"px-6 my-6\">\n        <Button iconLeft={Icons.AddIcon} onClick={openModal} >\n          <span>Create New Request</span>\n        </Button>\n        <ModalFormRequest isModalOpen={isModalOpen} closeModal={closeModal} />\n      </div>\n    </div>\n  )\n}\n\nexport default SidebarContent\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}