{"ast":null,"code":"var _jsxFileName = \"/Users/macbook/Development/SIMI/simi-app/src/pages/Manage/ModalFormRole.js\";\nimport React, { useEffect } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button, Input, Label } from \"@windmill/react-ui\";\nimport { Timestamp } from \"firebase/firestore\";\nimport { rolesServices } from \"../../services/roles\";\nimport Swal from \"sweetalert2\";\n\nfunction ModalFormRole(_ref) {\n  let {\n    closeModal,\n    isModalOpen,\n    id,\n    data\n  } = _ref;\n  //   console.log(data)\n  const {\n    register,\n    handleSubmit,\n    setValue\n  } = useForm({\n    defaultValues: { ...data\n    }\n  });\n  useEffect(() => {\n    if (data) {\n      register(\"roleName\");\n      register(\"description\");\n      setValue(\"roleName\", data.roleName);\n      setValue(\"description\", data.description);\n    } //eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [data]);\n\n  const onSubmit = value => {\n    const dataRole = {\n      roleName: value.roleName,\n      description: value.description,\n      priviledges: [{\n        permission: \"Home\",\n        view: false,\n        add: false,\n        edit: false,\n        delete: false\n      }, {\n        permission: \"Dashboard\",\n        view: false,\n        add: false,\n        edit: false,\n        delete: false\n      }, {\n        permission: \"Assets\",\n        view: false,\n        add: false,\n        edit: false,\n        delete: false\n      }, {\n        permission: \"Request\",\n        view: false,\n        add: false,\n        edit: false,\n        delete: false\n      }, {\n        permission: \"Manage\",\n        view: false,\n        add: false,\n        edit: false,\n        delete: false\n      }],\n      createdAt: Timestamp.now()\n    };\n\n    try {\n      if (id == null) {\n        Swal.fire({\n          title: \"Do you want to save the New Role?\",\n          showDenyButton: false,\n          showCancelButton: true,\n          confirmButtonText: \"Save\"\n        }).then(result => {\n          /* Read more about isConfirmed, isDenied below */\n          if (result.isConfirmed) {\n            rolesServices.add(dataRole);\n            Swal.fire(\"Saved!\", \"\", \"success\").then(() => window.location.reload());\n            closeModal();\n          }\n        });\n      } else {\n        Swal.fire({\n          title: \"Do you want to save the changes?\",\n          showDenyButton: true,\n          showCancelButton: true,\n          confirmButtonText: \"Save\",\n          denyButtonText: `Don't save`\n        }).then(result => {\n          /* Read more about isConfirmed, isDenied below */\n          if (result.isConfirmed) {\n            rolesServices.update(id, {\n              roleName: value.roleName,\n              description: value.description\n            });\n            Swal.fire(\"Saved!\", \"\", \"success\").then(() => window.location.reload());\n            closeModal();\n          } else if (result.isDenied) {\n            Swal.fire(\"Changes are not saved\", \"\", \"info\");\n            closeModal();\n          }\n        });\n      }\n    } catch (err) {\n      alert(err);\n    }\n  };\n\n  if (data) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Modal, {\n      isOpen: isModalOpen,\n      onClose: closeModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ModalHeader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 11\n      }\n    }, \"Form Data Role\"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: handleSubmit(onSubmit),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(ModalBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }\n    }, \"Role Name\", /*#__PURE__*/React.createElement(\"small\", {\n      className: \"text-red-600\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 28\n      }\n    }, \"*\")), /*#__PURE__*/React.createElement(Input, Object.assign({\n      className: \"mt-1\",\n      placeholder: \"Type xhere...\",\n      required: true //   defaultValue={data.roleName}\n\n    }, register(\"roleName\"), {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(Label, {\n      className: \"mt-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }\n    }, \"Description\", /*#__PURE__*/React.createElement(\"small\", {\n      className: \"text-red-600\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 30\n      }\n    }, \"*\")), /*#__PURE__*/React.createElement(Input, Object.assign({\n      className: \"mt-1\",\n      placeholder: \"Type here...\",\n      required: true //   defaultValue={data.description}\n\n    }, register(\"description\"), {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }\n    })))), /*#__PURE__*/React.createElement(ModalFooter, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"hidden sm:block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      layout: \"outline\",\n      onClick: closeModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 17\n      }\n    }, \"Cancel\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"hidden sm:block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 17\n      }\n    }, \"Save\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"block w-full sm:hidden\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      block: true,\n      size: \"large\",\n      layout: \"outline\",\n      onClick: closeModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 17\n      }\n    }, \"Cancel\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"block w-full sm:hidden\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      block: true,\n      size: \"large\",\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 17\n      }\n    }, \"Save\"))))));\n  } else return null;\n}\n\nexport default ModalFormRole;","map":{"version":3,"names":["React","useEffect","useForm","Modal","ModalHeader","ModalBody","ModalFooter","Button","Input","Label","Timestamp","rolesServices","Swal","ModalFormRole","closeModal","isModalOpen","id","data","register","handleSubmit","setValue","defaultValues","roleName","description","onSubmit","value","dataRole","priviledges","permission","view","add","edit","delete","createdAt","now","fire","title","showDenyButton","showCancelButton","confirmButtonText","then","result","isConfirmed","window","location","reload","denyButtonText","update","isDenied","err","alert"],"sources":["/Users/macbook/Development/SIMI/simi-app/src/pages/Manage/ModalFormRole.js"],"sourcesContent":["import React, { useEffect } from \"react\"\nimport { useForm } from \"react-hook-form\"\nimport {\n  Modal,\n  ModalHeader,\n  ModalBody,\n  ModalFooter,\n  Button,\n  Input,\n  Label,\n} from \"@windmill/react-ui\"\nimport { Timestamp } from \"firebase/firestore\"\nimport { rolesServices } from \"../../services/roles\"\nimport Swal from \"sweetalert2\"\n\nfunction ModalFormRole({ closeModal, isModalOpen, id, data }) {\n  //   console.log(data)\n  const { register, handleSubmit, setValue } = useForm({\n    defaultValues: { ...data },\n  })\n\n  useEffect(() => {\n    if (data) {\n      register(\"roleName\")\n      register(\"description\")\n      setValue(\"roleName\", data.roleName)\n      setValue(\"description\", data.description)\n    }\n    //eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [data])\n\n  const onSubmit = (value) => {\n    const dataRole = {\n      roleName: value.roleName,\n      description: value.description,\n      priviledges: [\n        {\n          permission: \"Home\",\n          view: false,\n          add: false,\n          edit: false,\n          delete: false,\n        },\n        {\n          permission: \"Dashboard\",\n          view: false,\n          add: false,\n          edit: false,\n          delete: false,\n        },\n        {\n          permission: \"Assets\",\n          view: false,\n          add: false,\n          edit: false,\n          delete: false,\n        },\n        {\n          permission: \"Request\",\n          view: false,\n          add: false,\n          edit: false,\n          delete: false,\n        },\n        {\n          permission: \"Manage\",\n          view: false,\n          add: false,\n          edit: false,\n          delete: false,\n        },\n      ],\n      createdAt: Timestamp.now(),\n    }\n    try {\n      if (id == null) {\n        Swal.fire({\n          title: \"Do you want to save the New Role?\",\n          showDenyButton: false,\n          showCancelButton: true,\n          confirmButtonText: \"Save\",\n        }).then((result) => {\n          /* Read more about isConfirmed, isDenied below */\n          if (result.isConfirmed) {\n            rolesServices.add(dataRole)\n            Swal.fire(\"Saved!\", \"\", \"success\").then(() =>\n              window.location.reload()\n            )\n            closeModal()\n          }\n        })\n      } else {\n        Swal.fire({\n          title: \"Do you want to save the changes?\",\n          showDenyButton: true,\n          showCancelButton: true,\n          confirmButtonText: \"Save\",\n          denyButtonText: `Don't save`,\n        }).then((result) => {\n          /* Read more about isConfirmed, isDenied below */\n          if (result.isConfirmed) {\n            rolesServices.update(id, {\n              roleName: value.roleName,\n              description: value.description,\n            })\n            Swal.fire(\"Saved!\", \"\", \"success\").then(() =>\n              window.location.reload()\n            )\n            closeModal()\n          } else if (result.isDenied) {\n            Swal.fire(\"Changes are not saved\", \"\", \"info\")\n            closeModal()\n          }\n        })\n      }\n    } catch (err) {\n      alert(err)\n    }\n  }\n\n  if (data) {\n    return (\n      <>\n        <Modal isOpen={isModalOpen} onClose={closeModal}>\n          <ModalHeader>Form Data Role</ModalHeader>\n          <form onSubmit={handleSubmit(onSubmit)}>\n            <ModalBody>\n              <Label>\n                <span>\n                  Role Name<small className=\"text-red-600\">*</small>\n                </span>\n                <Input\n                  className=\"mt-1\"\n                  placeholder=\"Type xhere...\"\n                  required\n                  //   defaultValue={data.roleName}\n                  {...register(\"roleName\")}\n                />\n              </Label>\n              <Label className=\"mt-3\">\n                <span>\n                  Description<small className=\"text-red-600\">*</small>\n                </span>\n                <Input\n                  className=\"mt-1\"\n                  placeholder=\"Type here...\"\n                  required\n                  //   defaultValue={data.description}\n                  {...register(\"description\")}\n                />\n              </Label>\n            </ModalBody>\n            <ModalFooter>\n              {/* I don't like this approach. Consider passing a prop to ModalFooter\n               * that if present, would duplicate the buttons in a way similar to this.\n               * Or, maybe find some way to pass something like size=\"large md:regular\"\n               * to Button\n               */}\n              <div className=\"hidden sm:block\">\n                <Button layout=\"outline\" onClick={closeModal}>\n                  Cancel\n                </Button>\n              </div>\n              <div className=\"hidden sm:block\">\n                <Button type=\"submit\">Save</Button>\n              </div>\n              <div className=\"block w-full sm:hidden\">\n                <Button\n                  block\n                  size=\"large\"\n                  layout=\"outline\"\n                  onClick={closeModal}\n                >\n                  Cancel\n                </Button>\n              </div>\n              <div className=\"block w-full sm:hidden\">\n                <Button block size=\"large\" type=\"submit\">\n                  Save\n                </Button>\n              </div>\n            </ModalFooter>\n          </form>\n        </Modal>\n      </>\n    )\n  } else return null\n}\n\nexport default ModalFormRole\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}